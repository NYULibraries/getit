<%-
# Generate a hyperlink for "Request" action with
# class "ajax_window" for unobtrusive JS. 
-%>
<% view_data = service_response.view_data %>
<% if current_user and view_data[:from_aleph] %>
  <%- # AJAX link, needs logged in user -%>
  <%= link_to("Request", new_holding_request_url(service_response.id), 
    target: "_blank", class: "btn btn-primary ajax_window") %>
<% elsif current_user %>
  <%- # Ordinary href link to request_url needs logged in user -%>
  <%= link_to("Request", new_holding_request_url(service_response.id), 
    target: "_blank", class: "btn btn-primary") %>
<% else %>
  <%- # Link to login screen -%>
  <%= link_to("Request", login_url({return_url: url_for_request(@user_request), service_response_id: service_response.id}), 
    target: "_blank", class: "btn btn-primary") %>
<% end %>
